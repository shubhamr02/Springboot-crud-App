<!Doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
        <title>Users</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheets/css" href="./static/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
		<style type="text/css">
			h3{
				text-align: center;
			}
			.back-button{
				text-align: left;
			}
			i{
				font-size: 24px;
		    	margin-right: 5px;
			}
		</style>
</head>
    <body>
    <div class="container">
        <h3 class="mx-auto m-3">List of Users</h3>
        <div class="back-button d-flex justify-content-between mb-3">
			<a class="btn btn-primary" href="/"><i class="fa fa-arrow-left"></i>Back</a>
			<!--<a class="btn btn-info" href="/user"><i class="fa fa-file-excel-o mr-2"></i>Upload</a>-->
			<form th:action="@{/import}" method="post" enctype="multipart/form-data">
			    <input type="file" th:name="file" accept=".xls,.xlsx" class="btn btn-light"/>
			   <!-- <input th:type="submit" value="Import" class="btn btn-info" /> -->
			    <button th:type="submit" class="btn btn-info"><i class="fa fa-file-import"></i>Import</button>
			</form>
			<a class="btn btn-success" href="/users/export/excel"><i class="fa fa-file-excel-o mr-2"></i>Export</a>
		</div>
        <table class="table table-striped mx-auto" id="rowId">
            <tr class="mr-3">
                <th>ID</th>
                <th>Name</th>
                <th>Phone No</th>
                <th>Email</th>
                <th>Action</th>
            </tr>

            <!--<h3>List of Users</h3>-->
                <tr th:each="user : ${users}" class="mr-3">
                    <td th:text="${user.id}">Id</td>
                    <td th:text="${user.name}">Name</td>
                    <td th:text="${user.phno}">Phone No</td>
                    <td th:text="${user.email}">Email</td>
                    <td>
	                    <a th:href="@{'/edit/'+${user.id}}" class="btn btn-secondary m-2"><i class="fa fa-edit"></i>Edit</a>
	                    <a class="btn btn-danger m-2" data-bs-toggle="modal" th:attr="data-bs-target='#deleteRecord'+${user.id}"><i class="fa fa-trash"></i>Delete</a>
	                    <!-- Modal -->
						<div class="modal fade" th:attr="id='deleteRecord'+${user.id}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
						  <div class="modal-dialog">
						    <div class="modal-content">
						      <div class="modal-header">
						      <h3>Confirm Delete</h3>
						        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						      </div>
						      <div class="modal-body">
						        <h4><i class="fa fa-exclamation-circle"></i>Are you sure you want to delete?</h4>
						      </div>
						      <div class="modal-footer">
						      	<a th:href="@{'/delete/'+${user.id}}" type="button" class="btn btn-danger">Delete Anyway</a>
						        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Dismiss</button>
						      </div>
						    </div>
						  </div>
						</div>
                    </td>
                </tr>
        </table>
        </div>
    </body>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
</html>